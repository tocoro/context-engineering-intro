# コンテキストエンジニアリングテンプレート

AIコーディングアシスタントが最初から最後まで作業を完了するために必要な情報を提供する、コンテキストエンジニアリングの包括的なテンプレートです。

> **コンテキストエンジニアリングは、プロンプトエンジニアリングの10倍、感覚的コーディングの100倍優れています。**

## 🚀 クイックスタート

```bash
# 1. このテンプレートをクローン
git clone https://github.com/coleam00/Context-Engineering-Intro.git
cd Context-Engineering-Intro

# 2. プロジェクトルールを設定（オプション - テンプレート提供済み）
# CLAUDE.mdを編集してプロジェクト固有のガイドラインを追加

# 3. 例を追加（強く推奨）
# 関連するコード例をexamples/フォルダに配置

# 4. 初期機能要求を作成
# INITIAL.mdを編集して機能要件を記述

# 5. 包括的なPRP（Product Requirements Prompt）を生成
# Claude Codeで実行：
/generate-prp INITIAL.md

# 6. PRPを実行して機能を実装
# Claude Codeで実行：
/execute-prp PRPs/your-feature-name.md
```

## 📚 目次

- [コンテキストエンジニアリングとは？](#コンテキストエンジニアリングとは)
- [テンプレート構造](#テンプレート構造)
- [ステップバイステップガイド](#ステップバイステップガイド)
- [効果的なINITIAL.mdファイルの作成](#効果的なinitialmdファイルの作成)
- [PRPワークフロー](#prpワークフロー)
- [例の効果的な使用](#例の効果的な使用)
- [ベストプラクティス](#ベストプラクティス)

## コンテキストエンジニアリングとは？

コンテキストエンジニアリングは、従来のプロンプトエンジニアリングからのパラダイムシフトを表します：

### プロンプトエンジニアリング vs コンテキストエンジニアリング

**プロンプトエンジニアリング：**
- 巧妙な言い回しと特定のフレーズに焦点
- タスクの言い方に限定
- 付箋を渡すようなもの

**コンテキストエンジニアリング：**
- 包括的なコンテキストを提供する完全なシステム
- ドキュメント、例、ルール、パターン、検証を含む
- すべての詳細を含む完全なシナリオを書くようなもの

### コンテキストエンジニアリングが重要な理由

1. **AIの失敗を減らす**: エージェントの失敗のほとんどはモデルの失敗ではなく、コンテキストの失敗
2. **一貫性を確保**: AIがプロジェクトのパターンと慣例に従う
3. **複雑な機能を可能にする**: AIが適切なコンテキストで多段階の実装を処理できる
4. **自己修正**: 検証ループによりAIが自分の間違いを修正できる

## テンプレート構造

```
context-engineering-intro/
├── .claude/
│   ├── commands/
│   │   ├── generate-prp.md    # 包括的なPRPを生成
│   │   └── execute-prp.md     # PRPを実行して機能を実装
│   └── settings.local.json    # Claude Code権限
├── PRPs/
│   ├── templates/
│   │   └── prp_base.md       # PRPのベーステンプレート
│   └── EXAMPLE_multi_agent_prp.md  # 完全なPRPの例
├── examples/                  # コード例（重要！）
├── CLAUDE.md                 # AIアシスタントのグローバルルール
├── INITIAL.md               # 機能要求のテンプレート
├── INITIAL_EXAMPLE.md       # 機能要求の例
└── README.md                # このファイル
```

このテンプレートは、コンテキストエンジニアリングにおけるRAGとツールに焦点を当てていません。なぜなら、それについては近いうちにさらに多くのものを用意しているからです。;)

## ステップバイステップガイド

### 1. グローバルルールを設定（CLAUDE.md）

`CLAUDE.md`ファイルには、AIアシスタントがすべての会話で従うプロジェクト全体のルールが含まれています。テンプレートには以下が含まれます：

- **プロジェクト認識**: 計画ドキュメントの読み取り、タスクの確認
- **コード構造**: ファイルサイズ制限、モジュール構成
- **テスト要件**: ユニットテストパターン、カバレッジ期待値
- **スタイル慣例**: 言語設定、フォーマットルール
- **ドキュメント標準**: ドキュメント文字列形式、コメント実践

**提供されたテンプレートをそのまま使用するか、プロジェクト用にカスタマイズできます。**

### 2. 初期機能要求を作成

`INITIAL.md`を編集して、構築したいものを記述します：

```markdown
## 機能:
[構築したいものを記述 - 機能と要件について具体的に]

## 例:
[examples/フォルダの例ファイルをリストアップし、使用方法を説明]

## ドキュメント:
[関連するドキュメント、API、MCPサーバーリソースへのリンクを含める]

## その他の考慮事項:
[AIアシスタントがよく見落とす落とし穴、特定の要件、または考慮すべきことを言及]
```

**完全な例については`INITIAL_EXAMPLE.md`を参照してください。**

### 3. PRPを生成

PRP（Product Requirements Prompts）は、以下を含む包括的な実装青写真です：

- 完全なコンテキストとドキュメント
- 検証付きの実装ステップ
- エラーハンドリングパターン
- テスト要件

これらはPRD（Product Requirements Documents）に似ていますが、AIコーディングアシスタントを指導するためにより具体的に作成されています。

Claude Codeで実行：
```bash
/generate-prp INITIAL.md
```

**注意:** スラッシュコマンドは`.claude/commands/`で定義されたカスタムコマンドです。実装を確認できます：
- `.claude/commands/generate-prp.md` - リサーチとPRP作成の方法を確認
- `.claude/commands/execute-prp.md` - PRPから機能を実装する方法を確認

これらのコマンドの`$ARGUMENTS`変数は、コマンド名の後に渡すもの（例：`INITIAL.md`や`PRPs/your-feature.md`）を受け取ります。

このコマンドは以下を実行します：
1. 機能要求を読み取り
2. パターンのためにコードベースをリサーチ
3. 関連するドキュメントを検索
4. `PRPs/your-feature-name.md`に包括的なPRPを作成

### 4. PRPを実行

生成後、PRPを実行して機能を実装します：

```bash
/execute-prp PRPs/your-feature-name.md
```

AIコーディングアシスタントは以下を実行します：
1. PRPからすべてのコンテキストを読み取り
2. 詳細な実装計画を作成
3. 検証付きで各ステップを実行
4. テストを実行し、問題を修正
5. すべての成功基準が満たされていることを確認

## 効果的なINITIAL.mdファイルの作成

### 主要セクションの説明

**機能**: 具体的で包括的に
- ❌ "Webスクレイパーを構築"
- ✅ "eコマースサイトから商品データを抽出し、レート制限を処理し、結果をPostgreSQLに保存するBeautifulSoupを使用した非同期Webスクレイパーを構築"

**例**: examples/フォルダを活用
- 関連するコードパターンを`examples/`に配置
- 従うべき特定のファイルとパターンを参照
- 模倣すべき側面を説明

**ドキュメント**: 関連するすべてのリソースを含める
- APIドキュメントURL
- ライブラリガイド
- MCPサーバードキュメント
- データベーススキーマ

**その他の考慮事項**: 重要な詳細を捕捉
- 認証要件
- レート制限またはクォータ
- 一般的な落とし穴
- パフォーマンス要件

## PRPワークフロー

### /generate-prpの動作方法

コマンドは以下のプロセスに従います：

1. **リサーチフェーズ**
   - パターンのためにコードベースを分析
   - 類似の実装を検索
   - 従うべき慣例を特定

2. **ドキュメント収集**
   - 関連するAPIドキュメントを取得
   - ライブラリドキュメントを含める
   - 落とし穴と癖を追加

3. **青写真作成**
   - 段階的な実装計画を作成
   - 検証ゲートを含める
   - テスト要件を追加

4. **品質チェック**
   - 信頼度レベル（1-10）をスコア
   - すべてのコンテキストが含まれていることを確認

### /execute-prpの動作方法

1. **コンテキスト読み込み**: 完全なPRPを読み取り
2. **計画**: TodoWriteを使用して詳細なタスクリストを作成
3. **実行**: 各コンポーネントを実装
4. **検証**: テストとリンティングを実行
5. **反復**: 見つかった問題を修正
6. **完了**: すべての要件が満たされていることを確認

生成されるものの完全な例については`PRPs/EXAMPLE_multi_agent_prp.md`を参照してください。

## 例の効果的な使用

`examples/`フォルダは成功に**重要**です。AIコーディングアシスタントは、従うべきパターンを見ることができると、はるかに優れたパフォーマンスを発揮します。

### 例に含めるべきもの

1. **コード構造パターン**
   - モジュールの構成方法
   - インポート慣例
   - クラス/関数パターン

2. **テストパターン**
   - テストファイル構造
   - モックアプローチ
   - アサーションスタイル

3. **統合パターン**
   - APIクライアント実装
   - データベース接続
   - 認証フロー

4. **CLIパターン**
   - 引数解析
   - 出力フォーマット
   - エラーハンドリング

### 例の構造

```
examples/
├── README.md           # 各例が何を示すかを説明
├── cli.py             # CLI実装パターン
├── agent/             # エージェントアーキテクチャパターン
│   ├── agent.py      # エージェント作成パターン
│   ├── tools.py      # ツール実装パターン
│   └── providers.py  # マルチプロバイダーパターン
└── tests/            # テストパターン
    ├── test_agent.py # ユニットテストパターン
    └── conftest.py   # Pytest設定
```

## ベストプラクティス

### 1. INITIAL.mdで明示的に
- AIがあなたの好みを知っていると仮定しない
- 特定の要件と制約を含める
- 例を自由に参照

### 2. 包括的な例を提供
- より多くの例 = より良い実装
- 何をすべきかと何をすべきでないかの両方を示す
- エラーハンドリングパターンを含める

### 3. 検証ゲートを使用
- PRPには合格しなければならないテストコマンドが含まれる
- AIはすべての検証が成功するまで反復する
- これにより最初の試行で動作するコードが確保される

### 4. ドキュメントを活用
- 公式APIドキュメントを含める
- MCPサーバーリソースを追加
- 特定のドキュメントセクションを参照

### 5. CLAUDE.mdをカスタマイズ
- あなたの慣例を追加
- プロジェクト固有のルールを含める
- コーディング標準を定義

## リソース

- [Claude Codeドキュメント](https://docs.anthropic.com/en/docs/claude-code)
- [コンテキストエンジニアリングベストプラクティス](https://www.philschmid.de/context-engineering)